\documentclass[a4paper,11pt]{thesis}

\input{library}

\begin{document}
% {{{ Page de garde
%\input{page_garde}
% }}}

% {{{ Première partie : sans titre pour l'instant
% TODO Split en plusieurs fichiers
% TODO Trouver les notations standard de l'ordonnancement

\chapter{Pr\'{e}sentation des problèmes}

\section{Définitions}

% {{{ DEF : Tache
\begin{ndf}[Tâche]
    Une tâche est une entité élémentaire indivisible dont la réalisation nécessite une certaine
    quantité de ressources, dans notre cas un certain temps de calcul d'une machine. Considérons une
    tâche $j$, elle est caractérisée par une date de début $\st{j}$ et une date de fin $\ct{j}$ et donc
    représentable par un intervalle de la forme $[\st{j}, \ct{j}]$ avec $\st{j} < \ct{j}$. La durée d'exécution
    de la tâche est notée $\pt{j}$ et est définie par : $\pt{j} = \ct{j} - \st{j}$.

    L'ensemble des tâches considérées est noté $\mathcal{T}$.
\end{ndf}
% }}}

% {{{ DEF : Réservation
\begin{ndf}[Réservation]
    Étant donnée une machine $m_i$, une réservation sur $m_i$ est une plage d'activité ou
    d'inactivité de la machine pendant laquelle les ressources de calcul de cette dernière sont
    indisponibles. Une réservation $l$ est caractérisée par une date de début $\sres{l}$ et une date de fin
    $\cres{l}$ et est relatif à une machine donnée. Elle est donc représentable par un couple composé
    d'une machine $m_i$ et d'un intervalle de la forme $[\sres{l}, \cres{l}]$ avec $\sres{l} < \cres{l}$.
    La durée d'une réservation $\pres{l}$ est définie par :  $\pres{l} = \cres{l} - \sres{l}$.

    L'ensemble des réservations considérées est noté $\mathcal{R}$.
\end{ndf}
% }}}

% {{{ DEF : Trou
\begin{ndf}[Trou]
    Étant donnés un ensemble de machine $\mathcal{M} = \{m_1, m_2, \dots, m_k\}$, un ensemble de
    tâches $\mathcal{T}$ et un ordonnancement $\mathcal{O}$ de ces tâches sur $\mathcal{M}$, un trou
    dans l'ordonnancement $\mathcal{O}$ est une plage d'inactivité non nulle de la machine, pendant
    laquelle les ressources de calcul de cette dernière sont disponibles et peuvent être utilisées à
    la réalisation d'une tâche. Un trou $\eta$ est caractérisé par une date de début $\sho{\eta}$ et
    une date de fin $\cho{\eta}$ et est relatif à un ordonnancement et à une machine. Il est donc
    représentable par un triplet composé d'un intervalle de la forme $[\sho{\eta}, \cho{\eta}]$ avec
    $\sho{\eta} < \cho{\eta}$, d'un ordonnancement et d'une machine. La durée d'un trou est donnée
    par $\pho{\eta} = \cho{\eta} - \sho{\eta}$.
\end{ndf}
% }}}

\begin{nrmq}
    Considérons les différents cas de figure de la figure~\ref{prescas}, les rectangles gris
    représentent différentes tâches, les rectangles noirs sont les réservations alors que les plages
    libres représentent les différents trous possibles.
\end{nrmq}

On définit alors le problème suivant :

% {{{ PROBLEME : Flexible Interval Scheduling
\dfopt{\fisched}
{Un ensemble $\mathcal{M} = \{m_1, \dots, m_k\}$ de $k$ machines, un ensemble $\mathcal{T}$ de
tâches $j = [\st{j}, \ct{j}]$, un ensemble $\mathcal{R}$ de réservations $l = (m_i, [\sres{l},
\cres{l}])$} 
{Un ordonnancement $\mathcal{O}$ des tâches sur les $k$ machines maximisant le trou
minimum}
% }}}

et son problème de décision associé :

% {{{ PROBLEME : Flexible Interval Scheduling Decision
\dfdec{\fischedpi}
{Un ensemble de $k$ machines, un ensemble $\mathcal{T}$ de tâches $j = [\st{j}, \ct{j}]$, un
ensemble $\mathcal{R}$ de réservations $l = (m_i, [\sres{l}, \cres{l}])$, un entier $z$}
{Existe-t-il un ordonnancement $\mathcal{O}$ des tâches sur les $k$ machines tel que la taille du
trou minimum soit supérieure ou égale à $z$?}
% }}}

% {{{ REMARQUE : Formalisation
\begin{nrmq}
    Si l'on considère la fonction\footnote{Par la suite nous noterons cette fonction $f$ en lieu et
    place de $f_{\mathcal{O}}$.}: \[
        f_{\mathcal{O}} : \left \lbrace \begin{array}{rcl}
            \mathcal{T} \cup \mathcal{R} & \longrightarrow & \mathcal{M} \\
            j & \mapsto & f_{\mathcal{O}}(j) \\
        \end{array}
        \right .
    \]
    qui, étant donné un ordonnancement $\mathcal{O}$, associe à une tâche ou une réservation $j$, la
    machine $m_i$ sur laquelle s'exécute cette tâche pour l'ordonnancement donné\footnote{Dans le
    cas d'une réservation, le résultat de la fonction est indépendant de l'ordonnancement
    considéré.}, on peut alors définir de manière plus formelle : \begin{itemize}
        \item[l'ensemble des tâches] \[
                \mathcal{T} = \{j = [\st{j}, \ct{j}] \quad \colon \quad \ct{j} - \st{j} = \pt{j} \}
            \]
        \item[l'ensemble des réservations] \[
                \mathcal{R} = \{l = (m_p, [\sres{l}, \cres{l}]) \quad \colon \quad \cres{l} -
                \sres{l} = \pres{l},\ f(l) = m_p\}
            \]
        \item[la fonction objectif étudiée] \[
                H_{\min} = \min \{ \cgen{i} - \sgen{i'} > 0 \quad \colon \quad i,i' \in
                \mathcal{T} \cup \mathcal{R},\ f(i) = f(i')\}
            \]
    \end{itemize}

    On peut finalement définir la notation de Graham pour ce problème, à savoir : \[
        P \arrowvert \mbox{Intervalle},\ \mathcal{T},\ \mathcal{R} \arrowvert \max\{H_{\min}\}
    \]
\end{nrmq}
% }}}

% {{{ REMARQUE : Conventions
\begin{nrmq}
    Quelques conventions sur les problèmes étudiés : \begin{enumerate}
        \item le temps $t_0$ est défini comme suit : \[
                t_0 = \min\{\min\{\st{j} : j \in \mathcal{T}\}, \min\{\sres{l} : l \in \mathcal{R}\}\}
            \]
        \item la date de début d'un ordonnancement est fixée arbitrairement loin à gauche de façon à
            ce que les trous initiaux aient une taille infinie. Ainsi sur la figure~\ref{prescas},
            on a : $\pho{h_4} = \pho{h_7} = \infty$
        \item la date de fin d'un ordonnancement est fixée, quant à elle, arbitrairement loin à
            droite de manière à ce que les trous finaux aient eux aussi une taille infinie. On a
            alors : $\pho{h_5} = \pho{h_6} = \infty$
    \end{enumerate}

    La conséquence directe de ces conventions est que, pour la fonction objectif étudiée, nous ne
    nous intéressons que aux trous délimités à gauche et à droite par une tâche ou un réservation.
\end{nrmq}
% }}}

% {{{ FIGURE : Différents cas de figure
\begin{figure}
    \begin{center}
        \begin{ordo}[10]{3}{1}{9}
            \newtask{2}{1}{1}{$t_1$}
            \newtask{1}{1}{7}{$t_2$}
            \newhole{4}{1}{3}{$h_1$}Optimisation

            \newlabeledresa{2}{2}{0}{$r_1$}
            \newtask{3}{2}{4}{$t_3$}
            \newhole{2}{2}{2}{$h_2$}

            \newlabeledresa{3}{3}{2}{$r_2$}
            \newlabeledresa{2}{3}{7}{$r_3$}
            \newhole{2}{3}{5}{$h_3$}

            \newbeghole{1}{1}{$h_4$}
            \newbeghole{2}{3}{$h_7$}

            \newendhole{1}{1}{8}{$h_5$}
            \newendhole{2}{2}{7}{$h_6$}
        \end{ordo}
    \end{center}
    \caption{Illustration des différents cas de figures}
    \label{prescas}
\end{figure}
% }}}

% {{{ FIGURE : Exemple ordonnancement
\begin{figure}
    \begin{center}
        \begin{ordo}[10]{3}{1}{10}
            \newresa{1}{1}{1}
            \newresa{1}{2}{3}

            \newtask{3}{3}{0}{$j_1$}
            \newtask{1}{2}{0}{$j_2$}
            \newtask{3}{1}{4}{$j_3$}
            \newtask{1}{2}{9}{$j_4$}
            \newtask{1}{3}{9}{$j_5$}

            \newhole{2}{1}{2}{$h_1$}
            \newhole{2}{2}{1}{$h_2$}
            \newhole{5}{2}{4}{$h_3$}
            \newhole{6}{3}{3}{$h_4$}
        \end{ordo}
    \end{center}
    \caption{Un ordonnancement quelconque}
    \label{ex1ordquelc}
\end{figure}
            
\begin{figure}
    \begin{center}
        \begin{ordo}[10]{3}{1}{10}
            \newresa{1}{1}{1}
            \newresa{1}{2}{3}

            \newtask{3}{2}{0}{$j_1$}
            \newtask{1}{1}{0}{$j_2$}
            \newtask{3}{2}{4}{$j_3$}
            \newtask{1}{1}{9}{$j_4$}
            \newtask{1}{3}{9}{$j_5$}

            \newhole{7}{1}{2}{$h_1$}
        \end{ordo}
    \end{center}
    \caption{Un ordonnancement optimal}
    \label{ex1ordopt}
\end{figure}
% }}}

% {{{ EXEMPLE : Un ordonnancement quelconque et un optimal
\begin{ex}
    Considérons un ensemble de cinq tâches $\mathcal{T} = \{j_1 = [0, 3], j_2 = [0,1], j_3 = [4,7],
    j_4 = j_5 = [9,10]\}$, un ensemble de trois machines $\mathcal{M} = \{m_1, m_2, m_3\}$ et un
    ensemble de deux réservations $\mathcal{R} = \{(m_1, [1,2]), (m_2, [3,4])\}$.

    Un ordonnancement quelconque est donné à la figure~\ref{ex1ordquelc}, la valeur du trou minimum
    est donnée par $h_1$ et $h_2$ et est égale à $2$, un ordonnancement optimal est donné à la
    figure~\ref{ex1ordopt} qui ne comporte qu'un seul trou dont la longueur est égale à $7$.
\end{ex}
% }}}

\section{$NP-$complétude}

Considérons les problèmes suivants :

% {{{ PROBLEME : Precoloring extension
\dfdec{\precolor}
{Un graphe $G=(V, E)$, un sous-ensemble $W \subseteq V$, une coloration propre de $G[W]$ et un
entier $k$}
{Existe-t-il une $k-$coloration propre $c$ de $G$ telle que pour tout sommet $v \in W$, $c(v) =
c'(v)$?}
% }}}

% {{{ PROBLEME : Flexible Interval Scheduling Decision
\dfdec{\unitfischedpi}
{Un ensemble de $k$ machines, un ensemble $\mathcal{T}$ de tâches $j = [\st{j}, \ct{j}]$ telles que
$\ct{j} = \st{j} + 1$ et $\st{j} \equiv 0 \mod 2$, un ensemble $\mathcal{R}$ de réservations $l =
(m_i, [\sres{l}, \cres{l}])$ telles que $\cres{j} = \sres{j} + 1$ et $\sres{j} \equiv 0 \mod 2$, un
entier $z$}
{Existe-t-il un ordonnancement $\mathcal{O}$ des tâches sur les $k$ machines tel que la taille du
trou minimum soit supérieure ou égale à $z$?}
% }}}

\begin{ndf}[Graphe d'intervalles]
    Étant donné un ensemble d'intervalles $\mathcal{I} = \{b_1, \dots, b_n\}$ tels que $b_i = [s_i,
    c_i]$, le graphe d'intervalles défini par cet ensemble est un graphe non orienté construit de la
    manière suivante :
    \begin{enumerate}
        \item à chaque intervalle $b_i \in \mathcal{I}$ on associe un sommet $v_i$
        \item étant donnés deux sommets $v_i,\ v_j \in V$, $(v_iv_j) \in E$ si et seulement si : \[
                s_i \leq s_j < c_i
            \]
            ou \[
                s_j \leq s_i < c_j
            \]
    \end{enumerate}

    Un graphe d'intervalles est dit propre si et seulement si, étant donnés deux intervalles $b_i$
    et $b_j$ : \[
        s_i \leq s_j < c_i \Rightarrow c_j > c_i
    \]
    Autrement, il n'existe aucune paire d'intervalle $(b_i, b_j) \in \mathcal{I}^2$ telle que $b_i$
    contient $b_j$.
\end{ndf}

\begin{nthrm}
    Le problème \precolor est \npc sur les graphes d'intervalles
    propres~\cite{marx2006precoloring}.
\end{nthrm}

\begin{nthrm}
    Le problème \unitfischedpi est \npc.
\end{nthrm}

\begin{proof}
    Pour démontrer la \npcude de \unitfischedpi, nous allons réaliser une réduction depuis
    \precolor.

    Considérons une instance du problème \precolor sur un graphe d'intervalles propres $G = (V, E)$
    obtenu à partir d'un ensemble d'intervalles $\mathcal{I}$.  On suppose sans perte de généralité
    que les intervalles représentés par les sommets sont de la forme $[s_i, c_i]$ avec $s_i \in
    \mathbb{N}$ et $c_i \in \mathbb{N}*$.

    Notons $w$, la taille du plus petit des intervalles représentés par les sommets de $G$, et
    $\iota$ le plus petit entier tel que $\iota w \geq z + 1$.

    Considérons la fonction $\phi$ qui à un intervalle $[s_i, c_i] \in \mathcal{I}$ associe
    l'intervalle $[s'_i, c'_i]$, tel que $s'_i = 2 \iota s_i$ et $c'_i = 2 \iota
    c_i$. L'ensemble des intervalles $\mathcal{I}'$ obtenu par $\phi(\mathcal{I})$ définit un graphe
    d'intervalle propre $G' = (V', E')$ identique à $G$. En effet $\phi$ est en réalité une
    homothétie de rapport $2 \iota$ préservant les inclusions et intersections d'intervalles.

    Le problème \precolor sur $G$ possède donc une solution si et seulement si le problème \precolor
    sur $G'$ possède une solution.

    À chaque sommet $v \in V'$, on associe une tâche unitaire $t_v$
    
\end{proof}


% }}}

\appendix
\bibliographystyle{plain}
\bibliography{biblio}


\end{document}
