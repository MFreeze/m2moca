\documentclass[a4paper,11pt]{thesis}

\input{library}

\begin{document}
% {{{ Page de garde
%\input{page_garde}
% }}}

% {{{ Première partie : sans tite pour l'instant
% TODO Split en plusieurs fichiers
% TODO Trouver les notations standard de l'ordonnancement



\begin{ndf}[Tâche]
    Une tâche est une entité élémentaire indivisible dont la réalisation nécessite une certaine
    quantité de ressources, dans notre cas un certain temps de calcul d'une machine. Considérons une
    tâche $j$, elle est caractérisée par une date de début $\st{j}$ et une date de fin $\ct{j}$ et donc
    représentable par un intervalle de la forme $[\st{j}, \ct{j}]$ avec $\st{j} < \ct{j}$. La durée d'exécution
    de la tâche est notée $\pt{j}$ et est définie par : $\pt{j} = \ct{j} - \st{j}$.

    L'ensemble des tâches considérées est noté $\mathcal{T}$.
\end{ndf}

\begin{ndf}[Réservation]
    Étant donnée une machine $m_i$, une réservation sur $m_i$ est une plage d'activité ou
    d'inactivité de la machine pendant laquelle les ressources de calcul de cette dernière sont
    indisponibles. Une réservation $l$ est caractérisée par une date de début $\sres{l}$ et une date de fin
    $\cres{l}$ et est relatif à une machine donnée. Elle est donc représentable par un couple composé
    d'une machine $m_i$ et d'un intervalle de la forme $[\sres{l}, \cres{l}]$ avec $\sres{l} < \cres{l}$.
    La durée d'une réservation $\pres{l}$ est définie par :  $\pres{l} = \cres{l} - \sres{l}$.

    L'ensemble des réservations considérées est noté $\mathcal{R}$.
\end{ndf}

\begin{ndf}[Trou]
    Étant donnés un ensemble de machine $\mathcal{M} = \{m_1, m_2, \dots, m_k\}$, un ensemble de
    tâches $\mathcal{T}$ et un ordonnancement $\mathcal{O}$ de ces tâches sur $\mathcal{M}$, un trou
    dans l'ordonnancement $\mathcal{O}$ est une plage d'inactivité non nulle de la machine, pendant
    laquelle les ressources de calcul de cette dernière sont disponibles et peuvent être utilisées à
    la réalisation d'une tâche. Un trou $\eta$ est caractérisé par une date de début $\sho{\eta}$ et
    une date de fin $\cho{\eta}$ et est relatif à un ordonnancement et à une machine. Il est donc
    représentable par un triplet composé d'un intervalle de la forme $[\sho{\eta}, \cho{\eta}]$ avec
    $\sho{\eta} < \cho{\eta}$, d'un ordonnancement et d'une machine. La durée d'un trou est donnée
    par $\pho{\eta} = \cho{\eta} - \sho{\eta}$.
\end{ndf}

\begin{nrmq}
    Considérons les différents cas de figure de la figure~\ref{prescas}, les rectangles gris
    représentent différentes tâches, les rectangles noirs sont les réservations alors que les plages
    libres représentent les différents trous possibles.
\end{nrmq}

On définit alors le problème suivant :

\dfopt{\fisched}
{Un ensemble $\mathcal{M} = \{m_1, \dots, m_k\}$ de $k$ machines, un ensemble $\mathcal{T}$ de
tâches $j = [\st{j}, \ct{j}]$, un ensemble $\mathcal{R}$ de réservations $l = (m_i, [\sres{l},
\cres{l}])$} 
{Un ordonnancement $\mathcal{O}$ des tâches sur les $k$ machines maximisant le trou
minimum}

et son problème de décision associé :

\dfpb{\fischedpi}
{Un ensemble de $k$ machines, un ensemble $\mathcal{T}$ de tâches $j = [\st{j}, \ct{j}]$, un
ensemble $\mathcal{R}$ de réservations $l = (m_i, [\sres{l}, \cres{l}])$, un entier $z$}
{Existe-t-il un ordonnancement $\mathcal{O}$ des tâches sur les $k$ machines tel que la taille du
trou minimum soit supérieure ou égale à $z$}

\begin{nrmq}
    Si l'on considère la fonction\footnote{Par la suite nous noterons cette fonction $f$ en lieu et
    place de $f_{\mathcal{O}}$.}: \[
        f_{\mathcal{O}} : \left \lbrace \begin{array}{rcl}
            \mathcal{T} \cup \mathcal{R} & \longrightarrow & \mathcal{M} \\
            j & \mapsto & f_{\mathcal{O}}(j) \\
        \end{array}
        \right .
    \]
    qui, étant donné un ordonnancement $\mathcal{O}$, associe à une tâche ou une réservation $j$, la
    machine $m_i$ sur laquelle s'exécute cette tâche pour l'ordonnancement donné\footnote{Dans le
    cas d'une réservation, le résultat de la fonction est indépendant de l'ordonnancement
    considéré.}, on peut alors définir de manière plus formelle : \begin{itemize}
        \item[l'ensemble des tâches] \[
                \mathcal{T} = \{j = [\st{j}, \ct{j}] \quad \colon \quad \ct{j} - \st{j} = \pt{j} \}
            \]
        \item[l'ensemble des réservations] \[
                \mathcal{R} = \{l = (m_p, [\sres{l}, \cres{l}]) \quad \colon \quad \cres{l} -
                \sres{l} = \pres{l},\ f(l) = m_p\}
            \]
        \item[la fonction objectif étudiée] \[
                H_{\min} = \min \{ \cgen{i} - \sgen{i'} > 0 \quad \colon \quad i,i' \in
                \mathcal{T} \cup \mathcal{R},\ f(i) = f(i')\}
            \]
    \end{itemize}

    On peut finalement définir la notation de Graham pour ce problème, à savoir : \[
        P \arrowvert \mbox{Intervalle},\ \mathcal{T},\ \mathcal{R} \arrowvert \max\{H_{\min}\}
    \]
\end{nrmq}

\begin{nrmq}
    Quelques conventions sur les problèmes étudiés : \begin{enumerate}
        \item le temps $t_0$ est défini comme suit : \[
                t_0 = \min\{\min\{t_i : t_i \in \mathcal{T}\}, \min\{l_i : l_i \in \mathcal{R}\}\}
            \]
        \item la date de début d'un ordonnancement est fixée arbitrairement loin à gauche de façon à
            ce que les trous initiaux aient une taille infinie. Ainsi sur la figure~\ref{prescas},
            on a : $\pho{h_4} = \pho{h_7} = \infty$
        \item la date de fin d'un ordonnancement est fixée, quant à elle, arbitrairement loin à
            droite de manière à ce que les trous finaux aient eux aussi une taille infinie. On a
            alors : $\pho{h_5} = \pho{h_6} = \infty$
    \end{enumerate}

    La conséquence directe de ces conventions est que, pour la fonction objectif étudiée, nous ne
    nous intéressons que aux trous délimités à gauche et à droite par une tâche ou un réservation.
\end{nrmq}

\begin{figure}
    \begin{center}
        \begin{ordo}[8]{3}{1}{8}
            \newtask{2}{1}{1}{$t_1$}
            \newtask{1}{1}{7}{$t_2$}
            \newhole{4}{1}{3}{$h_1$}

            \newlabeledresa{2}{2}{0}{$r_1$}
            \newtask{3}{2}{4}{$t_3$}
            \newhole{2}{2}{2}{$h_2$}

            \newlabeledresa{3}{3}{2}{$r_2$}
            \newlabeledresa{2}{3}{7}{$r_3$}
            \newhole{2}{3}{5}{$h_3$}

            \newbeghole{1}{1}{$h_4$}
            \newbeghole{2}{3}{$h_7$}

            \newendhole{1}{1}{8}{$h_5$}
            \newendhole{2}{2}{7}{$h_6$}
        \end{ordo}
    \end{center}
    \caption{Illustration des différents cas de figures}
    \label{prescas}
\end{figure}

\begin{figure}
    \begin{center}
        \begin{ordo}{3}{1}{10}
            \newresa{1}{1}{1}
            \newresa{1}{2}{3}

            \newtask{3}{3}{0}{$j_1$}
            \newtask{1}{2}{0}{$j_2$}
            \newtask{3}{1}{4}{$j_3$}
            \newtask{1}{2}{9}{$j_4$}
            \newtask{1}{3}{9}{$j_5$}

            \newhole{2}{1}{2}{$h_1$}
            \newhole{2}{2}{1}{$h_2$}
            \newhole{5}{2}{4}{$h_3$}
            \newhole{6}{3}{3}{$h_4$}
        \end{ordo}
    \end{center}
    \caption{Un ordonnancement quelconque}
    \label{ex1ordquelc}
\end{figure}
            
\begin{figure}
    \begin{center}
        \begin{ordo}{3}{1}{10}
            \newresa{1}{1}{1}
            \newresa{1}{2}{3}

            \newtask{3}{2}{0}{$j_1$}
            \newtask{1}{1}{0}{$j_2$}
            \newtask{3}{2}{4}{$j_3$}
            \newtask{1}{1}{9}{$j_4$}
            \newtask{1}{3}{9}{$j_5$}

            \newhole{7}{1}{2}{$h_1$}
        \end{ordo}
    \end{center}
    \caption{Un ordonnancement optimal}
    \label{ex1ordopt}
\end{figure}

\begin{ex}
    Considérons un ensemble de cinq tâches $\mathcal{T} = \{j_1 = [0, 3], j_2 = [0,1], j_3 = [4,7],
    j_4 = j_5 = [9,10]\}$, un ensemble de trois machines $\mathcal{M} = \{m_1, m_2, m_3\}$ et un
    ensemble de deux réservations $\mathcal{R} = \{(m_1, [1,2]), (m_2, [3,4])\}$.

    Un ordonnancement quelconque est donné à la figure~\ref{ex1ordquelc}, la valeur du trou minimum
    est donnée par $h_1$ et $h_2$ et est égale à $2$, un ordonnancement optimal est donné à la
    figure~\ref{ex1ordopt} qui ne comporte qu'un seul trou dont la longueur est égale à $7$.
\end{ex}

% }}}

\end{document}
